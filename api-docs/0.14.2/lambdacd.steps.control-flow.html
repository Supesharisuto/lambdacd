<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>lambdacd.steps.control-flow documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">LambdaCD</span> <span class="project-version">0.14.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lambdacd</span></div></div></li><li class="depth-2 branch"><a href="lambdacd.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="lambdacd.event-bus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>event-bus</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>execution</span></div></div></li><li class="depth-3"><a href="lambdacd.execution.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>presentation</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.presentation.pipeline-state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-state</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.presentation.pipeline-structure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-structure</span></div></a></li><li class="depth-3"><a href="lambdacd.presentation.unified.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unified</span></div></a></li><li class="depth-2 branch"><a href="lambdacd.runners.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>runners</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.state.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="lambdacd.state.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="lambdacd.step-id.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>step-id</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stepresults</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.stepresults.flatten.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flatten</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.stepresults.merge.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merge</span></div></a></li><li class="depth-3"><a href="lambdacd.stepresults.merge-resolvers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merge-resolvers</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>steps</span></div></div></li><li class="depth-3 branch current"><a href="lambdacd.steps.control-flow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control-flow</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.steps.git.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>git</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.steps.manualtrigger.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>manualtrigger</span></div></a></li><li class="depth-3"><a href="lambdacd.steps.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>stepstatus</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.stepstatus.predicates.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>predicates</span></div></a></li><li class="depth-3"><a href="lambdacd.stepstatus.unify.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unify</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>stepsupport</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.stepsupport.chaining.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chaining</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.stepsupport.killable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>killable</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.stepsupport.metadata.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metadata</span></div></a></li><li class="depth-3"><a href="lambdacd.stepsupport.output.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>output</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>ui</span></div></div></li><li class="depth-3 branch"><a href="lambdacd.ui.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-3 branch"><a href="lambdacd.ui.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="lambdacd.ui.ui-page.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ui-page</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-alias"><div class="inner"><span>alias</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-either"><div class="inner"><span>either</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-in-cwd"><div class="inner"><span>in-cwd</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-in-parallel"><div class="inner"><span>in-parallel</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-junction"><div class="inner"><span>junction</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-run"><div class="inner"><span>run</span></div></a></li><li class="depth-1"><a href="lambdacd.steps.control-flow.html#var-with-workspace"><div class="inner"><span>with-workspace</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">lambdacd.steps.control-flow</h1><div class="doc"><div class="markdown"><p>Control-flow elements for a pipeline: steps that control the way their child-steps are being run.</p></div></div><div class="public anchor" id="var-alias"><h3>alias</h3><div class="usage"><code>(alias alias child)</code></div><div class="doc"><div class="markdown"><p>Just runs child but child is displayed with the given alias in visualization.</p>
<p>Example:</p>
<pre><code class="clojure">(def pipeline-structure
  `(; ...
    (alias "tests"
      (run
        unit-test
        acceptance-test)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L197">view source</a></div></div><div class="public anchor" id="var-either"><h3>either</h3><div class="usage"><code>(either &amp; steps)</code></div><div class="doc"><div class="markdown"><p>Build step that executes its children in parallel and returns after the first child finished successfully. Commonly used to wait for one of multiple triggers to return.</p>
<p>Example:</p>
<pre><code class="clojure">(def pipeline-structure
  `((either
      wait-for-git-commit
      wait-for-manual-trigger)
    build
    test
    deploy))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L43">view source</a></div></div><div class="public anchor" id="var-in-cwd"><h3>in-cwd</h3><div class="usage"><code>(in-cwd cwd &amp; steps)</code></div><div class="doc"><div class="markdown"><p>Build step that executes its children in sequence and passes the value of a given working directory to each of them. Returns once the last step finished.</p>
<p>Example:</p>
<pre><code class="clojure">(defn some-step [args ctx]
  (println "The working directory:" (:cwd args)))

(def pipeline-structure
  `(; ...
    (in-cwd "/tmp/some-dir"
      some-step
      some-other-step)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L116">view source</a></div></div><div class="public anchor" id="var-in-parallel"><h3>in-parallel</h3><div class="usage"><code>(in-parallel &amp; steps)</code></div><div class="doc"><div class="markdown"><p>Build step that executes its children in parallel and returns after all children finished successfully. Commonly used to parallelize build independent build steps</p>
<p>Example:</p>
<pre><code class="clojure">(def pipeline-structure
  `(; ...
    build
    (in-parallel
      test-backend
      test-frontend)
    deploy))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L95">view source</a></div></div><div class="public anchor" id="var-junction"><h3>junction</h3><div class="usage"><code>(junction condition-step success-step failure-step)</code></div><div class="doc"><div class="markdown"><p>Build step that executes the first child and, depending on its success, the second or third child. Commonly used for conditional, if-then-else logic in pipelines.</p>
<p>Example:</p>
<pre><code class="clojure">(def pipeline-structure
  `(; ...
    (junction
      should-do-something?
      step-to-run-if-success
      step-to-run-if-not-success)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L175">view source</a></div></div><div class="public anchor" id="var-run"><h3>run</h3><div class="usage"><code>(run &amp; steps)</code></div><div class="doc"><div class="markdown"><p>Build step that executes its children in sequence and returns once the last step finished. Commonly used to pass a chain of steps to into a control flow expecting only one (e.g. <code>either</code>, <code>junction</code>) or to wrap related steps into a container and <code>alias</code> it to structure the pipeline.</p>
<p>Example:</p>
<pre><code class="clojure">(def pipeline-structure
  `(; ...
    (alias "tests"
      (run
        unit-test
        acceptance-test))
    (junction
      should-deploy?
      (run
        deploy-ci
        deploy-qa)
      do-nothing)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L145">view source</a></div></div><div class="public anchor" id="var-with-workspace"><h3>with-workspace</h3><div class="usage"><code>(with-workspace &amp; steps)</code></div><div class="doc"><div class="markdown"><p>Runs given steps with a clean workspace given to child step as :cwd argument. Commonly used if a build step needs some temporary directory to run, e.g. clone repositories and run build tasks. The given workspace is not persistent, it only exists for the runtime of the build step and is deleted afterwards. Long-living artifacts should be stored in an external artifact repository or using additional libraries like <a href="https://github.com/flosell/lambdacd-artifacts"><code>lambdacd-artifacts</code></a>.</p>
<p>Example:</p>
<pre><code class="clojure">(defn some-step [args ctx]
  (println "The working directory:" (:cwd args)))

(def pipeline-structure
  `(; ...
    (with-workspace
      some-step
      some-other-step)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/flosell/lambdacd/blob/master/src/clj/lambdacd/steps/control_flow.clj#L212">view source</a></div></div></div></body></html>